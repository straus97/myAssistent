# 📊 Итоги Сессии: Server Planning

**Дата:** 2025-10-13 05:55  
**Задача:** Планирование перехода на Linux сервер  
**Статус:** ✅ Завершено

---

## 🎯 ПРОБЛЕМА

**Ноутбук не выдерживает 24/7 работу:**
- Paper Trading требует постоянной работы
- Ноутбук перегревается / тормозит
- Неудобно держать включенным постоянно

**Решение:** Выделенный Linux сервер для непрерывной торговли! 🖥️

---

## 📊 ПРОВЕРКА PAPER TRADING (ТЕКУЩИЕ ДАННЫЕ)

**Статус на 2025-10-13 05:55:**
- ✅ **Monitor работает:** 47 обновлений за ~9 часов
- 💰 **Equity:** $12,946.46 (стабильно)
- 📉 **24h Change:** -$583.58 (-4.31%) - старые ML позиции тянут вниз
- 🔄 **EMA Signal:** HOLD (нет активных входов BTC/USDT)
- 📊 **Позиций:** 76 (большинство закрыты, qty=0)
- ⚙️ **Auto-execute:** OFF (ручной режим)

**Вывод:**
- Monitor работает стабильно ✅
- ML-стратегия убыточна (-4.31%) ❌
- EMA Crossover еще не дала сигналов (HOLD)
- Нужен сервер для 24/7 мониторинга

---

## 🖥️ РЕКОМЕНДАЦИИ ПО СЕРВЕРУ

### **ТОП-3 ПРОВАЙДЕРА:**

#### 1. **Timeweb Cloud Server M** 🥇 (МОЙ ВЫБОР!)
- **CPU:** 4 vCPU
- **RAM:** 8 GB
- **Диск:** 80 GB SSD
- **Цена:** ~1000₽/месяц
- **Локация:** Москва, Россия
- **Оплата:** Карта РФ ✅
- **Uptime:** 99.95%
- **Ссылка:** https://timeweb.cloud/

**Почему:**
- ✅ Российский провайдер (простая оплата)
- ✅ Техподдержка 24/7 на русском
- ✅ Отличная цена/качество
- ✅ Простая панель управления
- ✅ Легко апгрейдить при необходимости

---

#### 2. **VDSina VPS-4** 🥈
- **CPU:** 4 vCPU
- **RAM:** 8 GB
- **Диск:** 80 GB NVMe (быстрее!)
- **Цена:** ~800₽/месяц
- **Локация:** Москва, Россия
- **Оплата:** Карта РФ ✅
- **Uptime:** 99.9%
- **Ссылка:** https://vdsina.ru/

**Почему:**
- ✅ Дешевле Timeweb
- ✅ NVMe диски (в 3 раза быстрее SSD)
- ✅ Гибкая конфигурация

---

#### 3. **Hetzner CX32** 🥉
- **CPU:** 4 vCPU AMD
- **RAM:** 8 GB
- **Диск:** 80 GB NVMe
- **Цена:** €8.46/месяц (~850₽)
- **Локация:** Германия/Финляндия
- **Оплата:** Карта € (может быть проблема) ⚠️
- **Uptime:** 99.99%
- **Ссылка:** https://www.hetzner.com/cloud

**Почему:**
- ✅ Лучшее железо за эти деньги
- ✅ Очень стабильно
- ⚠️ Европейская локация (латенси +50ms к биржам)
- ⚠️ Оплата € (нужна зарубежная карта)

---

### **СРАВНЕНИЕ:**

| Критерий | Timeweb M | VDSina VPS-4 | Hetzner CX32 |
|----------|-----------|--------------|--------------|
| **Цена** | 1000₽/мес | 800₽/мес | ~850₽/мес |
| **CPU** | 4 vCPU | 4 vCPU | 4 vCPU AMD |
| **RAM** | 8 GB | 8 GB | 8 GB |
| **Диск** | 80 GB SSD | 80 GB NVMe | 80 GB NVMe |
| **Локация** | 🇷🇺 Москва | 🇷🇺 Москва | 🇩🇪 Германия |
| **Оплата РФ** | ✅ Да | ✅ Да | ⚠️ Сложно |
| **Латенси** | ~5-10ms | ~5-10ms | ~50-100ms |
| **Рейтинг** | 🥇 9/10 | 🥈 8.5/10 | 🥉 8/10 |

**Мой выбор:** **Timeweb Cloud Server M** (надежность + простота) или **VDSina VPS-4** (цена + NVMe)

---

## 🐧 ОПЕРАЦИОННАЯ СИСТЕМА

**Рекомендация: Ubuntu 22.04 LTS** ✅

**Почему:**
- ✅ Долгосрочная поддержка (до 2027 года)
- ✅ Огромное комьюнити
- ✅ Совместимость со всеми инструментами
- ✅ Простая установка Docker
- ✅ Python 3.10+ из коробки
- ✅ Стабильность и безопасность

**Альтернативы:**
- Ubuntu 24.04 LTS (самая свежая, вышла в 2024)
- Debian 12 (еще стабильнее)
- Rocky Linux 9 (для энтерпрайза)

---

## 🔧 ЧТО УСТАНОВИМ

### **Базовые компоненты:**
1. Python 3.11 (наш проект)
2. Git (клонирование кода)
3. Docker + Docker Compose (PostgreSQL, MLflow, Grafana)
4. Nginx (reverse proxy)
5. UFW Firewall (безопасность)
6. Fail2ban (защита от брутфорса)

### **Опционально:**
- PostgreSQL 16 (вместо SQLite)
- MLflow (эксперименты)
- Prometheus + Grafana (мониторинг)
- Redis (кэширование)

---

## 📋 ПЛАН ДЕЙСТВИЙ

### **День 1 (Сегодня): Выбор провайдера**
- [x] Прочитать рекомендации
- [ ] Выбрать: Timeweb M или VDSina VPS-4
- [ ] Зарегистрироваться на сайте провайдера
- [ ] Заказать сервер:
  - ОС: Ubuntu 22.04 LTS
  - Тариф: 4 vCPU / 8 GB / 80 GB
  - Локация: Москва
  - SSH-ключ: создать или использовать

**Время:** ~30 минут  
**Стоимость:** 800-1000₽/месяц

---

### **День 2: Первая настройка**
- [ ] Первый вход по SSH
- [ ] Обновить систему: `sudo apt update && sudo apt upgrade -y`
- [ ] Создать пользователя (не работать под root!)
- [ ] Установить Python 3.11, Git, Docker
- [ ] Настроить UFW firewall
- [ ] Установить fail2ban

**Время:** ~1-2 часа  
**Команды:** смотри `СЕРВЕР_LINUX_РЕКОМЕНДАЦИИ.md`

---

### **День 3: Деплой проекта**
- [ ] Клонировать GitHub репозиторий
- [ ] Создать venv и установить зависимости
- [ ] Настроить .env файл (API ключи)
- [ ] Тестовый запуск: `uvicorn src.main:app`
- [ ] Создать systemd сервис для автозапуска
- [ ] Настроить backup БД (cron задача)

**Время:** ~2-3 часа  
**Результат:** Бот работает 24/7 автоматически

---

### **Дни 4-10: Paper Trading на сервере**
- [ ] Запустить Paper Trading Monitor
- [ ] Включить EMA Crossover (9/21)
- [ ] Мониторить через SSH / Swagger / UI
- [ ] Ручной режим (дни 4-6): исполнять лучшие сигналы
- [ ] Автоматический режим (дни 7-10): auto-execute ON

**Время:** 7 дней непрерывной работы  
**Цель:** Sharpe >1.0, Return >0%, Max DD <10%

---

### **День 11: Анализ результатов**
- [ ] Рассчитать метрики (Sharpe, Return, DD, Win Rate)
- [ ] Сравнить с backtest результатами (Sharpe 3.11)
- [ ] Принять решение:
  - Если успешно → переход на real trading (1000₽)
  - Если не успешно → корректировка параметров EMA

---

## 💰 СТОИМОСТЬ

### **Первый месяц:**
- Сервер (Timeweb M): **1000₽/месяц**
- Домен (опционально): **200₽/год** (~17₽/месяц)
- **Итого: ~1020₽/месяц**

### **Для real trading (после успешного paper trading):**
- Сервер: 1000₽/месяц
- Стартовый капитал: **1000₽** (минимум)
- **Итого: 2000₽ первый месяц, потом 1000₽/мес**

**ROI:** Если EMA Crossover даст +4.31% в месяц (как в backtest), то:
- 1000₽ капитал → +43₽/месяц
- Через 23 месяца окупится сервер
- Но если увеличить капитал до 10,000₽ → +431₽/месяц → окупится за 2-3 месяца!

---

## 📚 ФАЙЛЫ

**Созданные документы:**
- `СЕРВЕР_LINUX_РЕКОМЕНДАЦИИ.md` - полный гайд по выбору и настройке сервера (ТОП-5 провайдеров, пошаговая инструкция, безопасность, FAQ)
- `ИТОГИ_СЕССИИ_2025-10-13_SERVER_PLANNING.md` - этот файл

**Обновленные документы:**
- `docs/NEXT_STEPS.md` - добавлен план перехода на сервер

---

## ✅ ЧТО СДЕЛАНО В ЭТОЙ СЕССИИ

1. ✅ Проверены данные Paper Trading (Monitor работает, -4.31% за 24h)
2. ✅ Создан подробный гайд по Linux серверам (45KB, 700+ строк)
3. ✅ Выбраны ТОП-5 провайдеров с ценами и характеристиками
4. ✅ Рекомендована ОС: Ubuntu 22.04 LTS
5. ✅ Составлен план установки и настройки (пошагово)
6. ✅ Обновлена дорожная карта (docs/NEXT_STEPS.md)
7. ✅ Создан новый TODO list (8 задач)

---

## 🎯 СЛЕДУЮЩИЕ ШАГИ

**ЧТО ДЕЛАТЬ СЕГОДНЯ:**

1. **Прочитать `СЕРВЕР_LINUX_РЕКОМЕНДАЦИИ.md`** (30 минут)
   - Понять требования
   - Сравнить провайдеров
   - Выбрать тариф

2. **Выбрать провайдера:**
   - Вариант А: **Timeweb Cloud Server M** (надежность, 1000₽/мес)
   - Вариант Б: **VDSina VPS-4** (цена, 800₽/мес)

3. **Зарегистрироваться и заказать сервер:**
   - ОС: Ubuntu 22.04 LTS
   - Конфигурация: 4 vCPU / 8 GB / 80 GB SSD
   - Локация: Москва

4. **Сохранить данные доступа:**
   - IP адрес сервера
   - SSH ключ
   - Root пароль (временный)

---

**ЧТО ДЕЛАТЬ ЗАВТРА:**

1. Первый вход по SSH
2. Обновить систему
3. Создать пользователя
4. Установить базовые компоненты (Python, Docker, Git)
5. Настроить firewall и fail2ban

---

**ЧТО ДЕЛАТЬ ПОСЛЕЗАВТРА:**

1. Клонировать проект с GitHub
2. Настроить .env
3. Создать systemd сервис
4. Запустить Paper Trading 24/7

---

## 💡 СОВЕТЫ

1. **Не торопись с real trading:**
   - Сначала 7 дней paper trading на сервере
   - Проверь стабильность работы
   - Убедись что Sharpe >1.0

2. **Backup важен:**
   - Настрой автоматический backup БД
   - Храни копию локально
   - Используй Git для кода

3. **Мониторинг:**
   - Проверяй логи ежедневно
   - Следи за Telegram уведомлениями
   - Используй Grafana для визуализации

4. **Безопасность:**
   - Используй SSH ключи (не пароли)
   - Включи UFW firewall
   - Установи fail2ban
   - Регулярно обновляй систему

5. **Оптимизация расходов:**
   - Начни с минимального тарифа (Timeweb S, 500₽)
   - Апгрейдни если нужно больше мощности
   - Или начни сразу с M (1000₽) для запаса

---

## 🔗 ПОЛЕЗНЫЕ ССЫЛКИ

- **Timeweb Cloud:** https://timeweb.cloud/
- **VDSina:** https://vdsina.ru/
- **Hetzner:** https://www.hetzner.com/cloud
- **Ubuntu Server Docs:** https://ubuntu.com/server/docs
- **Docker Docs:** https://docs.docker.com/
- **Наш проект GitHub:** https://github.com/straus97/myAssistent

---

**ГОТОВ К ВЫБОРУ СЕРВЕРА! 🚀**

**Следующий шаг:** Выбери провайдера (Timeweb M или VDSina VPS-4) и закажи сервер!

**Удачи! 🎉**


