# ü§ñ MyAssistent ‚Äî –û–±–∑–æ—Ä –ü—Ä–æ–µ–∫—Ç–∞

## –ö—Ä–∞—Ç–∫–æ–µ –û–ø–∏—Å–∞–Ω–∏–µ

**MyAssistent** ‚Äî –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π –ª–æ–∫–∞–ª—å–Ω—ã–π —Ç–æ—Ä–≥–æ–≤—ã–π –±–æ—Ç —Å –º–∞—à–∏–Ω–Ω—ã–º –æ–±—É—á–µ–Ω–∏–µ–º –¥–ª—è –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω–æ–π –±–∏—Ä–∂–∏ Bybit. –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Windows 10, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª –æ—Ç —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –¥–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ —Å –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–º —Ä–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç–æ–º.

### –ö–ª—é—á–µ–≤—ã–µ –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
- **–°—Ç–∞—Ä—Ç–æ–≤—ã–π –∫–∞–ø–∏—Ç–∞–ª:** 1000 ‚ÇΩ (paper trading)
- **–ë–∏—Ä–∂–∞:** Bybit (spot, –≤ –ø–ª–∞–Ω–∞—Ö ‚Äî futures)
- **ML-–¥–≤–∏–∂–æ–∫:** XGBoost —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø–æ–¥–±–æ—Ä–æ–º –ø–æ—Ä–æ–≥–∞
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** FastAPI + Swagger UI + Streamlit Dashboard
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:** Telegram (—Å–∏–≥–Ω–∞–ª—ã, –æ—Ç—á—ë—Ç—ã, –∞–≤–∞—Ä–∏–∏)
- **–†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã:** –õ–æ–∫–∞–ª—å–Ω–æ, –ø–æ–∫–∞ –≤–∫–ª—é—á—ë–Ω –ü–ö

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –°—Ç–µ–∫

### Backend
- **FastAPI** ‚Äî REST API, 80+ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤, 12 —Ç–µ–≥–æ–≤—ã—Ö –≥—Ä—É–ø–ø
- **SQLAlchemy 2.0** ‚Äî ORM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
- **SQLite** ‚Äî –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (`assistant.db`, –≤ –ø–ª–∞–Ω–∞—Ö –º–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ PostgreSQL)
- **APScheduler** ‚Äî —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ (—Ü–µ–Ω—ã –∫–∞–∂–¥—ã–µ 3 –º–∏–Ω, –º–æ–¥–µ–ª–∏ –Ω–æ—á—å—é)
- **Pydantic v2** ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### ML & Data
- **XGBoost** ‚Äî –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π –±—É—Å—Ç–∏–Ω–≥ –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–æ–≤
- **scikit-learn** ‚Äî –º–µ—Ç—Ä–∏–∫–∏, –≤–∞–ª–∏–¥–∞—Ü–∏—è, –ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥
- **pandas** ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–∞–π–º—Å–µ—Ä–∏–π
- **pandas-ta** ‚Äî —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (RSI, BB, EMA)
- **joblib** ‚Äî —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥–µ–ª–µ–π

### Market Data
- **ccxt** ‚Äî —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –±–∏—Ä–∂–∞–º (Binance, Bybit)
- **pybit** ‚Äî –Ω–∞—Ç–∏–≤–Ω—ã–π –∫–ª–∏–µ–Ω—Ç Bybit v5 API
- **feedparser** ‚Äî –ø–∞—Ä—Å–∏–Ω–≥ RSS –Ω–æ–≤–æ—Å—Ç–µ–π (Cointelegraph, CoinDesk, The Block)

### UI & Notifications
- **Streamlit** ‚Äî –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –¥–∞—à–±–æ—Ä–¥ (–≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ)
- **Jinja2** ‚Äî HTML-–æ—Ç—á—ë—Ç—ã
- **requests** ‚Äî Telegram Bot API

### Development
- **pytest** ‚Äî —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã
- **ruff** ‚Äî –±—ã—Å—Ç—Ä—ã–π –ª–∏–Ω—Ç–µ—Ä (–∑–∞–º–µ–Ω–∞ flake8/isort)
- **black** ‚Äî —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä –∫–æ–¥–∞
- **mypy** ‚Äî —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Windows 10 ‚Üí start_server.bat                          ‚îÇ
‚îÇ   ‚îú‚îÄ uvicorn :8000 (FastAPI backend)                    ‚îÇ
‚îÇ   ‚îî‚îÄ streamlit :8501 (UI dashboard)                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚Üì                           ‚Üì
   Swagger UI (/docs)          Streamlit GUI
   + X-API-Key auth           (buttons, charts, tables)
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ü—Ä–æ–µ–∫—Ç–∞

```
myAssistent/
‚îú‚îÄ‚îÄ src/                    # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ main.py             # FastAPI app (4000+ —Å—Ç—Ä–æ–∫, 83 —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞)
‚îÇ   ‚îú‚îÄ‚îÄ config.py           # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (dotenv, paths)
‚îÇ   ‚îú‚îÄ‚îÄ db.py               # SQLAlchemy ORM (12 –º–æ–¥–µ–ª–µ–π)
‚îÇ   ‚îú‚îÄ‚îÄ prices.py           # REST API Binance/Bybit ‚Üí OHLCV
‚îÇ   ‚îú‚îÄ‚îÄ features.py         # –î–∞—Ç–∞—Å–µ—Ç (RSI, BB, –Ω–æ–≤–æ—Å—Ç–∏, 40+ —Ñ–∏—á)
‚îÇ   ‚îú‚îÄ‚îÄ modeling.py         # XGBoost train, threshold grid, walk-forward CV
‚îÇ   ‚îú‚îÄ‚îÄ champion.py         # OOS-–æ—Ü–µ–Ω–∫–∞, promote –ø–æ Sharpe/AUC
‚îÇ   ‚îú‚îÄ‚îÄ model_registry.py   # –†–µ–µ—Å—Ç—Ä –∞–∫—Ç–∏–≤–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π per pair/TF
‚îÇ   ‚îú‚îÄ‚îÄ model_policy.py     # SLA: max_age_days, retrain_if_auc_below
‚îÇ   ‚îú‚îÄ‚îÄ news.py             # RSS ‚Üí feedparser ‚Üí SQLite
‚îÇ   ‚îú‚îÄ‚îÄ news_url.py         # –ö–∞–Ω–æ–Ω–∏–∑–∞—Ü–∏—è URL (—É–±–∏—Ä–∞–µ—Ç utm_*)
‚îÇ   ‚îú‚îÄ‚îÄ analysis.py         # Sentiment (–ª–µ–∫—Å–∏–∫–æ–Ω—ã RU/EN), —Ç–µ–≥–∏
‚îÇ   ‚îú‚îÄ‚îÄ risk.py             # –§–∏–ª—å—Ç—Ä—ã (–≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å, EMA, –æ–±—ä—ë–º)
‚îÇ   ‚îú‚îÄ‚îÄ risk_schema.py      # Pydantic —Å—Ö–µ–º—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ trade.py            # Paper trading (JSON state), auto-sizing
‚îÇ   ‚îú‚îÄ‚îÄ notify.py           # Telegram API, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ watchlist.py        # CRUD + auto-discovery (ccxt)
‚îÇ   ‚îú‚îÄ‚îÄ automation.py       # APScheduler jobs
‚îÇ   ‚îú‚îÄ‚îÄ reports.py          # HTML-–æ—Ç—á—ë—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ cmd_parser.py       # –ü–∞—Ä—Å–∏–Ω–≥ /buy /sell /close –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îî‚îÄ‚îÄ logging_setup.py    # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ
‚îú‚îÄ‚îÄ artifacts/              # –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã (–≤–Ω–µ git)
‚îÇ   ‚îú‚îÄ‚îÄ config/             # JSON-–∫–æ–Ω—Ñ–∏–≥–∏ (policy, watchlist, notify)
‚îÇ   ‚îú‚îÄ‚îÄ models/             # *.pkl (XGB + –º–µ—Ç—Ä–∏–∫–∏ + —Ñ–∏—á–∏ + threshold)
‚îÇ   ‚îú‚îÄ‚îÄ reports/            # HTML-–æ—Ç—á—ë—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ state/              # paper_state.json, trade_guard.json
‚îÇ   ‚îî‚îÄ‚îÄ backups/            # snapshot_*.zip
‚îÇ
‚îú‚îÄ‚îÄ logs/                   # –õ–æ–≥–∏ (–≤–Ω–µ git)
‚îÇ   ‚îú‚îÄ‚îÄ app.log             # –û—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ server.log          # –õ–æ–≥ uvicorn
‚îÇ
‚îú‚îÄ‚îÄ tests/                  # –¢–µ—Å—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ test_cmd_parser.py  # –ü–∞—Ä—Å–∏–Ω–≥ —Ç–æ—Ä–≥–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥
‚îÇ
‚îú‚îÄ‚îÄ docs/                   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ PROJECT_OVERVIEW.md # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îÇ   ‚îú‚îÄ‚îÄ ROADMAP.md          # –î–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ CHANGELOG.md        # –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
‚îÇ
‚îú‚îÄ‚îÄ start_server.bat        # –ó–∞–ø—É—Å–∫ backend + UI (Windows)
‚îú‚îÄ‚îÄ streamlit_app.py        # Streamlit UI
‚îú‚îÄ‚îÄ requirements.txt        # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ pytest.ini              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è pytest
‚îú‚îÄ‚îÄ .gitignore              # –ò—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è git
‚îú‚îÄ‚îÄ .env                    # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–ù–ï –≤ git!)
‚îú‚îÄ‚îÄ env.example.txt         # –®–∞–±–ª–æ–Ω .env
‚îú‚îÄ‚îÄ JOURNAL.md              # –ñ—É—Ä–Ω–∞–ª —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚îî‚îÄ‚îÄ README.md               # –ö—Ä–∞—Ç–∫–∞—è —Å–ø—Ä–∞–≤–∫–∞
```

## –ë–∞–∑–∞ –î–∞–Ω–Ω—ã—Ö (assistant.db)

### –¢–∞–±–ª–∏—Ü—ã

#### –ù–æ–≤–æ—Å—Ç–∏ –∏ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
- **Message** ‚Äî —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–∞–º—è—Ç–∏
- **Article** ‚Äî RSS-–Ω–æ–≤–æ—Å—Ç–∏ (url unique, source, title, published_at)
- **ArticleAnnotation** ‚Äî 1:1 –∫ Article (lang, sentiment, tags)

#### –†—ã–Ω–æ—á–Ω—ã–µ –î–∞–Ω–Ω—ã–µ
- **Price** ‚Äî OHLCV —Å–≤–µ—á–∏ (unique: exchange+symbol+timeframe+ts)

#### ML –∏ –ú–æ–¥–µ–ª–∏
- **ModelRun** ‚Äî –∂—É—Ä–Ω–∞–ª –æ–±—É—á–µ–Ω–∏–π (–º–µ—Ç—Ä–∏–∫–∏, model_path, features_json)
- **SignalEvent** ‚Äî —Å–∏–≥–Ω–∞–ª—ã (unique: exchange+symbol+tf+bar_dt)
- **SignalOutcome** ‚Äî –∏—Å—Ö–æ–¥—ã —Å–∏–≥–Ω–∞–ª–æ–≤ (entry/exit/ret_h/mdd)

#### Paper Trading
- **Portfolio** ‚Äî –æ–±—â–∏–π –∫—ç—à (deprecated, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è trade.py state)
- **PaperPosition** ‚Äî –ø–æ–∑–∏—Ü–∏–∏ –≤ —Å–∏–º–µ (unique: exchange+symbol)
- **PaperOrder** ‚Äî –∏—Å—Ç–æ—Ä–∏—è –æ—Ä–¥–µ—Ä–æ–≤
- **PaperTrade** ‚Äî –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è (fills)
- **EquityPoint** ‚Äî –∏—Å—Ç–æ—Ä–∏—è equity –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤

## –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π –¶–∏–∫–ª –°–∏–≥–Ω–∞–ª–∞

```
1. –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö
   POST /prices/fetch ‚Üí OHLCV ‚Üí –ë–î

2. –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç–∞—Å–µ—Ç–∞
   POST /dataset/build ‚Üí RSI, BB, –Ω–æ–≤–æ—Å—Ç–∏ ‚Üí features

3. –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏
   POST /model/train ‚Üí XGBoost ‚Üí artifacts/models/*.pkl

4. Champion/Challenger
   POST /model/champion/promote_if_better ‚Üí OOS-–æ—Ü–µ–Ω–∫–∞ ‚Üí promote

5. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–∞
   POST /signal/latest ‚Üí load_model_for ‚Üí predict ‚Üí —Ñ–∏–ª—å—Ç—Ä—ã ‚Üí –ë–î + TG

6. –ê–≤—Ç–æ—Ç–æ—Ä–≥–æ–≤–ª—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   paper_open_buy_auto ‚Üí sizing –ø–æ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ ‚Üí paper_state.json
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –†–∏—Å–∫-–ö–æ–Ω—Ç—Ä–æ–ª—å

### Trade Guard (Kill Switch)
- **–†–µ–∂–∏–º—ã:** `live` / `close_only` / `locked`
- **–§–∞–π–ª:** `artifacts/state/trade_guard.json`
- **API:** `GET/POST /trade/guard`

### –†–∏—Å–∫-–ü–æ–ª–∏—Ç–∏–∫–∞ (policy.json)
```json
{
  "min_prob_gap": 0.02,           // –º–∏–Ω. –∑–∞–ø–∞—Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏
  "cooldown_minutes": 90,         // –ø–∞—É–∑–∞ –º–µ–∂–¥—É —Å–∏–≥–Ω–∞–ª–∞–º–∏
  "block_if_dead_volatility": true,
  "max_open_positions": 0,        // 0 = –±–µ–∑ –ª–∏–º–∏—Ç–∞
  "buy_fraction": 0.10,           // –¥–æ–ª—è –∫–∞–ø–∏—Ç–∞–ª–∞ (10%)
  "fee_bps": 8.0,                 // –∫–æ–º–∏—Å—Å–∏—è
  "slip_bps": 5.0,                // –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏–µ
  "volatility_thresholds": {...}, // dead/hot –≥—Ä–∞–Ω–∏—Ü—ã
  "monitor": {...},               // –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–∑–∏—Ü–∏–π
  "news_radar": {...}             // –¥–µ—Ç–µ–∫—Ç–æ—Ä –≤—Å–ø–ª–µ—Å–∫–æ–≤
}
```

### API-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- **–ú–µ—Ç–æ–¥:** `X-API-Key` header
- **–ò—Å–∫–ª—é—á–µ–Ω–∏—è:** `/`, `/ping`, HTML-–ø–∞–Ω–µ–ª–∏
- **–û—à–∏–±–∫–∏:** 401 (missing), 403 (invalid), 503 (misconfigured)

## –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è (APScheduler)

| Job | –ò–Ω—Ç–µ—Ä–≤–∞–ª | –î–µ–π—Å—Ç–≤–∏–µ |
|-----|----------|----------|
| job_watchlist_discover | 6 —á–∞—Å–æ–≤ | –î–æ–±–∞–≤–ª—è–µ—Ç —Ç–æ–ø-25 –ø–∞—Ä –ø–æ –æ–±—ä—ë–º—É |
| job_prices_sync | 3 –º–∏–Ω—É—Ç—ã | –ó–∞–≥—Ä—É–∂–∞–µ—Ç OHLCV –¥–ª—è watchlist |
| job_news_fetch | 5 –º–∏–Ω—É—Ç | –ü–æ–¥—Ç—è–≥–∏–≤–∞–µ—Ç RSS-–ª–µ–Ω—Ç—ã |
| job_news_analyze | 10 –º–∏–Ω—É—Ç | Sentiment + tags —Ä–∞–∑–º–µ—Ç–∫–∞ |
| job_models_maint | 03:20 UTC | –ü–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ –ø–æ SLA |
| job_signals_cycle | 5 –º–∏–Ω—É—Ç | –°–∏–≥–Ω–∞–ª—ã + TG + auto-trade |
| job_daily_report | 03:50 UTC | HTML-–æ—Ç—á—ë—Ç + TG |

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –û–∫—Ä—É–∂–µ–Ω–∏—è (.env)
- `API_KEY` ‚Äî –∫–ª—é—á –¥–ª—è X-API-Key auth
- `DATABASE_URL` ‚Äî –ø—É—Ç—å –∫ –ë–î (SQLite/PostgreSQL)
- `TELEGRAM_BOT_TOKEN` / `TELEGRAM_CHAT_ID` ‚Äî —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- `TRADE_MODE` ‚Äî —Ä–µ–∂–∏–º —Ç–æ—Ä–≥–æ–≤–ª–∏ (live/close_only/locked)
- `BYBIT_API_KEY` / `BYBIT_API_SECRET` ‚Äî –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏

### –§–∞–π–ª–æ–≤—ã–µ –ö–æ–Ω—Ñ–∏–≥–∏ (artifacts/config/)
- `policy.json` ‚Äî —Ä–∏—Å–∫-–ø–æ–ª–∏—Ç–∏–∫–∞
- `model_policy.json` ‚Äî SLA –º–æ–¥–µ–ª–µ–π
- `notify.json` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- `watchlist.json` ‚Äî —Å–ø–∏—Å–æ–∫ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã—Ö –ø–∞—Ä
- `active_models.json` ‚Äî —Ä—É—á–Ω–æ–π –≤—ã–±–æ—Ä –º–æ–¥–µ–ª–µ–π

## –ó–∞–ø—É—Å–∫

```batch
# Windows (start_server.bat)
start_server.bat

# –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ (–≤—Ä—É—á–Ω—É—é):
.venv\Scripts\activate
uvicorn src.main:app --host 127.0.0.1 --port 8000
streamlit run streamlit_app.py --server.port 8501
```

### –î–æ—Å—Ç—É–ø
- **Backend API:** http://127.0.0.1:8000
- **Swagger UI:** http://127.0.0.1:8000/docs
- **Streamlit UI:** http://localhost:8501

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –û—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏
- `logs/app.log` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥ (INFO/DEBUG/WARNING/ERROR)
- `logs/server.log` ‚Äî uvicorn –ª–æ–≥

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
- `GET /_debug/info` ‚Äî —Å–ø–∏—Å–æ–∫ —Ä–æ—É—Ç–æ–≤, cwd, sys.path
- `GET /_debug/env` ‚Äî –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (masked)
- `GET /automation/status` ‚Äî —Å—Ç–∞—Ç—É—Å APScheduler jobs

### –ú–µ—Ç—Ä–∏–∫–∏
- `artifacts/metrics.json` ‚Äî –º–µ—Ç—Ä–∏–∫–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–π –º–æ–¥–µ–ª–∏
- `GET /ui/summary` ‚Äî —Å–≤–æ–¥–∫–∞ (equity, positions, signals)
- `GET /model/health` ‚Äî —Å–≤–µ–∂–µ—Å—Ç—å –º–æ–¥–µ–ª–µ–π –ø–æ watchlist

## –û—Å–Ω–æ–≤–Ω—ã–µ –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –î–∞–Ω–Ω—ã–º–∏
- `POST /news/fetch` ‚Äî RSS –∑–∞–≥—Ä—É–∑–∫–∞
- `POST /prices/fetch` ‚Äî OHLCV –∑–∞–≥—Ä—É–∑–∫–∞
- `POST /dataset/build` ‚Äî —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç–∞—Å–µ—Ç–∞

### ML –∏ –ú–æ–¥–µ–ª–∏
- `POST /model/train` ‚Äî –æ–±—É—á–µ–Ω–∏–µ XGBoost
- `POST /model/train_missing` ‚Äî —É–º–Ω–∞—è –¥–æ—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –ø–æ SLA
- `GET /model/health` ‚Äî —Å—Ç–∞—Ç—É—Å —Å–≤–µ–∂–µ—Å—Ç–∏ –º–æ–¥–µ–ª–µ–π
- `POST /model/champion/promote_if_better` ‚Äî champion/challenger

### –°–∏–≥–Ω–∞–ª—ã
- `POST /signal/latest` ‚Äî inference + —Ñ–∏–ª—å—Ç—Ä—ã + DB + TG
- `GET /signals/recent` ‚Äî –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è

### –¢–æ—Ä–≥–æ–≤–ª—è (Paper)
- `GET /trade/positions` ‚Äî –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏
- `GET /trade/equity` ‚Äî cash + positions ‚Üí equity
- `POST /trade/paper/close` ‚Äî –∑–∞–∫—Ä—ã—Ç—å –ø–∞—Ä—É
- `POST /trade/manual/buy` ‚Äî —Ä—É—á–Ω–∞—è –ø–æ–∫—É–ø–∫–∞

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
- `GET /automation/status` ‚Äî —Å–ø–∏—Å–æ–∫ jobs
- `POST /automation/run` ‚Äî —Ä–∞–∑–æ–≤—ã–π –∑–∞–ø—É—Å–∫

## SLA –ú–æ–¥–µ–ª–µ–π (model_policy.json)

```json
{
  "max_age_days": 7,              // –ø–µ—Ä–µ–æ–±—É—á–∞—Ç—å –µ—Å–ª–∏ > 7 –¥–Ω–µ–π
  "retrain_if_auc_below": 0.55,   // –ø–µ—Ä–µ–æ–±—É—á–∞—Ç—å –µ—Å–ª–∏ AUC < 0.55
  "min_train_rows": 200,          // –º–∏–Ω–∏–º—É–º —Å—Ç—Ä–æ–∫ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è
  "promote_if_auc_gain": 0.005    // –ø—Ä–æ–º–æ—É—Ç–∏—Ç—å –µ—Å–ª–∏ ŒîAUC ‚â• 0.5%
}
```

## –§–∏—á–∏ (40+)

### –¶–µ–Ω–æ–≤—ã–µ
- `ret_1`, `ret_3`, `ret_6`, `ret_12` ‚Äî –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏
- `vol_norm` ‚Äî –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –æ–±—ä—ë–º

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ
- `rsi_14` ‚Äî RSI(14)
- `bb_pct_20_2`, `bb_width_20_2` ‚Äî Bollinger Bands

### –ù–æ–≤–æ—Å—Ç–Ω—ã–µ
- `news_cnt_6`, `news_cnt_24` ‚Äî —Å—á—ë—Ç—á–∏–∫–∏ –Ω–æ–≤–æ—Å—Ç–µ–π
- `sent_mean_6`, `sent_mean_24` ‚Äî —Å—Ä–µ–¥–Ω–∏–π sentiment
- `tag_<name>_6`, `tag_<name>_24` ‚Äî —á–∞—Å—Ç–æ—Ç–∞ —Ç–µ–≥–æ–≤ (btc, eth, etf, sec, hack, etc.)

### –¶–µ–ª–µ–≤–∞—è –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è
- `future_ret` ‚Äî –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ `horizon_steps` –±–∞—Ä–æ–≤
- `y` ‚Äî –±–∏–Ω–∞—Ä–Ω–∞—è –º–µ—Ç–∫–∞ (future_ret > 0)

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ü—Ä–æ–±–ª–µ–º—ã

1. **SQLite –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π** ‚Äî –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω ‚Üí Postgres
2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –ë–î** ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ö–µ–º—ã —Ç—Ä–µ–±—É—é—Ç –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è –ë–î (–≤ –ø–ª–∞–Ω–∞—Ö: Alembic)
3. **main.py –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω** ‚Äî 4000+ —Å—Ç—Ä–æ–∫, —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è –Ω–∞ —Ä–æ—É—Ç–µ—Ä—ã
4. **–ù–∏–∑–∫–∏–π coverage —Ç–µ—Å—Ç–æ–≤** ‚Äî <5%, –Ω—É–∂–Ω—ã —Ç–µ—Å—Ç—ã –¥–ª—è modeling, features, trade
5. **–î–≤–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö** ‚Äî assistant.db (52 MB) –∏ app.db (8.9 MB) —Ç—Ä–µ–±—É—é—Ç –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è

## –î–∞–ª—å–Ω–µ–π—à–µ–µ –†–∞–∑–≤–∏—Ç–∏–µ

–°–º. [ROADMAP.md](ROADMAP.md) –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø–ª–∞–Ω–∞ —Ä–∞–∑–≤–∏—Ç–∏—è –ø—Ä–æ–µ–∫—Ç–∞.

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –¥–ª—è –ª–∏—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è. –í–æ–ø—Ä–æ—Å—ã –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è ‚Äî —á–µ—Ä–µ–∑ GitHub Issues.

